# UI框架的最初设计

我们采用C++23标准进行UI框架的设计，参考了WPF、WINUI和QT等成熟框架的设计理念。以下是UI框架最初设计的核心组件和类结构。
绘制引擎方面，我们计划使用OpenGL作为底层渲染API，以确保高性能和跨平台兼容性。

## 1. Application和Window

在最初的设计中，UI框架的核心组件是Application和Window。Application负责管理应用程序的生命周期，而Window则代表应用程序中的一个窗口。每个Application可以包含多个Window，每个Window可以包含多个视图组件。

### 1.1 Application
Application类负责初始化应用程序环境，处理应用程序的启动和关闭事件。它还负责管理全局资源，如主题、字体和颜色等。

#### 属性
- `Windows`: 获取应用程序中所有窗口的集合。
- `Current`: 获取当前应用程序实例的静态属性。
- `IsRunning`: 获取一个值，指示应用程序是否正在运行。
- `Exit`: 获取一个事件，当应用程序即将关闭时引发该事件。
- `Startup`: 获取一个事件，当应用程序启动时引发该事件。
- `Activated`: 获取一个事件，当应用程序激活时引发该事件。
- `Deactivated`: 获取一个事件，当应用程序失去激活时引发该事件。

#### 方法
- `Run()`: 启动应用程序的主事件循环。
- `Shutdown()`: 关闭应用程序并释放所有资源。
- `AddWindow(WindowPtr window, std::string name)`: 向应用程序添加一个新的窗口并为其命名。
- `RemoveWindow(WindowPtr window)`: 从应用程序中移除指定窗口实例。
- `RemoveWindow(std::string name)`: 从应用程序中移除指定名称的窗口。

#### 事件
- `Exit`: 当应用程序即将关闭时引发该事件。
- `Startup`: 当应用程序启动时引发该事件。
- `Activated`: 当应用程序激活时引发该事件。
- `Deactivated`: 当应用程序失去激活时引发该事件。

#### 例子
```cpp
#include "Event.h"

class App : public Application {
public:
    App() {
        this->Startup += []() {
            std::cout << "Application started!" << std::endl;
        };

        this->Exit += []() {
            std::cout << "Application exiting!" << std::endl;
        };
    }
};

int main() {
    App app;

    auto mainWindow = std::make_shared<Window>();
    app.AddWindow(mainWindow, "MainWindow");

    app.Run();

    return 0;
}
```


### 1.2 Window
Window类代表应用程序中的一个窗口。它负责处理窗口的创建、显示和销毁。Window还负责管理窗口中的视图组件，并处理用户输入事件。

#### 属性
- `Title`: 获取或设置窗口的标题。
- `Width`: 获取或设置窗口的宽度。
- `Height`: 获取或设置窗口的高度。
- `IsVisible`: 获取一个值，指示窗口是否可见。
- `Content`: 获取或设置窗口的内容视图。
- `Closed`: 获取一个事件，当窗口关闭时引发该事件。
- `Activated`: 获取一个事件，当窗口激活时引发该事件。
- `Deactivated`: 获取一个事件，当窗口失去激活时引发该事件。
- `Resized`: 获取一个事件，当窗口大小改变时引发该事件。
- `Moved`: 获取一个事件，当窗口位置改变时引发该事件。
- `KeyDown`: 获取一个事件，当按下键盘按键时引发该事件。
- `KeyUp`: 获取一个事件，当释放键盘按键时引发该事件。
- `MouseDown`: 获取一个事件，当按下鼠标按钮时引发该事件。
- `MouseUp`: 获取一个事件，当释放鼠标按钮时引发该事件。
- `MouseMove`: 获取一个事件，当鼠标移动时引发该事件。
- `MouseWheel`: 获取一个事件，当鼠标滚轮滚动时引发该事件。
- `FocusGained`: 获取一个事件，当窗口获得焦点时引发该事件。
- `FocusLost`: 获取一个事件，当窗口失去焦点时引发该事件。
- `Closing`: 获取一个事件，当窗口即将关闭时引发该事件。
- `Opened`: 获取一个事件，当窗口打开时引发该事件。
- `Minimized`: 获取一个事件，当窗口最小化时引发该事件。
- `Maximized`: 获取一个事件，当窗口最大化时引发该事件。
- `Restored`: 获取一个事件，当窗口从最小化或最大化恢复时引发该事件。

#### 方法
- `Show()`: 显示窗口。
- `Hide()`: 隐藏窗口。
- `Close()`: 关闭窗口。
- `Content(View content)`: 设置窗口的内容视图。
- `Content()`: 获取窗口的内容视图。
- `Focus()`: 使窗口获得焦点。
- `Resize(int width, int height)`: 调整窗口大小。
- `Move(int x, int y)`: 移动窗口位置。
- `Minimize()`: 最小化窗口。
- `Maximize()`: 最大化窗口。
- `Restore()`: 还原窗口。
- `Title(std::string title)`: 设置窗口标题。
- `Title()`: 获取窗口标题。
- `Width(int width)`: 设置窗口宽度。
- `Width()`: 获取窗口宽度。
- `Height(int height)`: 设置窗口高度。
- `Height()`: 获取窗口高度。
- `IsVisible(bool isVisible)`: 设置窗口可见性。
- `IsVisible()`: 获取窗口可见性。

#### 事件
- `Closed`: 当窗口关闭时引发该事件。
- `Activated`: 当窗口激活时引发该事件。
- `Deactivated`: 当窗口失去激活时引发该事件。
- `Resized`: 当窗口大小改变时引发该事件。
- `Moved`: 当窗口位置改变时引发该事件。
- `KeyDown`: 当按下键盘按键时引发该事件。
- `KeyUp`: 当释放键盘按键时引发该事件。
- `MouseDown`: 当按下鼠标按钮时引发该事件。
- `MouseUp`: 当释放鼠标按钮时引发该事件。
- `MouseMove`: 当鼠标移动时引发该事件。
- `MouseWheel`: 当鼠标滚轮滚动时引发该事件。
- `FocusGained`: 当窗口获得焦点时引发该事件。
- `FocusLost`: 当窗口失去焦点时引发该事件。
- `Closing`: 当窗口即将关闭时引发该事件。
- `Opened`: 当窗口打开时引发该事件。
- `Minimized`: 当窗口最小化时引发该事件。
- `Maximized`: 当窗口最大化时引发该事件。
- `Restored`: 当窗口从最小化或最大化恢复时引发该事件。

#### 例子
```cpp
#include "UIFramework.h"

class App : public Application {
public:
    App() {
        this->Startup += []() {
            std::cout << "Application started!" << std::endl;
        };

        this->Exit += []() {
            std::cout << "Application exiting!" << std::endl;
        };
    }
};

class Mainwindow : public Window {
public:
    Mainwindow() {
        this->Title("Main Window");
        this->Width(800);
        this->Height(600);

        this->Closed += []() {
            std::cout << "Window closed!" << std::endl;
        };

        this->Resized += [](int width, int height) {
            std::cout << "Window resized to " << width << "x" << height << std::endl;
        };
    }
};

int main() {
    App app;

    auto mainWindow = std::make_shared<Mainwindow>();
    app.AddWindow(mainWindow, "MainWindow");

    app.Run();

    return 0;
}
```
